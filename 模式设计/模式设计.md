# 数据库 —— 关系模式

## 1

### 推导传递律

设 $R(U)$ 是属性集 $U$ 上的关系模式，$A,B,C \in U$

因为 $A\to B$, $B\to C$

所以对于 $R(U)$ 的任意可能关系 $r$, $r$ 中在 $A$ 上属性值相同的元组，在 $B$ 上属性值也相同；$r$ 中在 $B$ 上属性值相同的元组，在 $C$ 上的属性值也相同。

所以 $r$ 中在 $A$ 上属性值相同的元组，在 $C$ 上的属性值也相同。

所以 $A\to C$.

### 推导分解律

设 $R(U)$ 是属性集 $U$ 上的关系模式，$A,B,C \in U$

因为 $A \to BC$, 所以对于 $R(U)$ 的任意可能关系 $r$, $r$ 中在 $A$ 上属性值相同的元组，在 $B\cup C$ 上属性值也相同，所以在 $B$ 上的属性值相同，在 $C$ 上的属性值也相同。

所以 $A \to B$ 且 $A\to C$.

## 2
### (1)

先利用分解率并消去重复：

$F=\{A\to B, A\to C,B\to C,B\to E,AB\to C,AC\to D,AC\to E\}$

消除左部冗余：

1. $A\to C$, $AC\to E$ 可推出 $A\to E$, 消去 $AC\to E$ 左部的 $C$
2. $A\to C$, $AC\to D$ 可推出 $A\to D$, 消去 $AC\to D$ 左部的 $C$
3. $A\to B$, $AB\to C$ 可推出 $A\to C$, 消去 $AB\to C$ 左部的 $B$

同时消去重复，变为 $F=\{A\to B, A\to C,B\to C,B\to E,A\to D, A\to E\}$

消去冗余函数依赖：

1. $A\to B$, $B\to C$ 可推出 $A\to C$, 消去 $A\to C$.
2. $A\to B$, $B\to E$ 可推出 $A\to E$, 消去 $A\to E$.

最终变为 $F=\{A\to B, B\to C,A\to D,B\to E\}$

### (2)

候选码为 $A$.

由 $A\to D$, 可以看出所有候选码都必须包括 $A$.

而由最小依赖可以推出 $A\to B,A\to C, A\to D,A\to E$.

即 $A\to ABCDE$

所以 $A$ 是候选码。任何其他包含 A 的集合不满足最小性，不是候选码。

## 3
### (1)

显然是 1NF.

可化为最小函数依赖集 $\{A\to B,B\to C,C\to D, A\to E\}$

可知候选码只有 $AFG$.

$B,C,D$ 都不是完全依赖于 $AFG$.

所以不是 2NF.

### (2)

显然满足 1NF.

1. R1 中候选码只有 $AB$, $E$ 完全依赖于 $AB$.
2. R2 中候选码只有 $B$, $C,D$ 完全依赖于 B.
3. R3 中候选码为 $AFG$

所以满足 2NF.

但 R2 中 $D$ 传递依赖于 $A$, 所以不是 3NF.

### (3)

1. R 满足 1NF.
2. 因为 $A^+=ABCDE$, $F^+=F$, $G^+=G$, 所以分解为满足 2NF 的
   $$R_1=\{A,B,C,D,E\},R_2=\{A,F,G\}$$
3. F 化简为 $\{A\to B,B\to C,C\to D, A\to E\}$, 所以分解为满足 3NF 的
   $$R_1=\{A,B\},R_2=\{A,E\},R_3=\{B,C\},R_4=\{C,D\},R_5=\{A,F,G\}$$

### (4)

第 (3) 题中得出的
$$R_1=\{A,B\},R_2=\{A,E\},R_3=\{B,C\},R_4=\{C,D\},R_5=\{A,F,G\}$$
满足 BCNF.